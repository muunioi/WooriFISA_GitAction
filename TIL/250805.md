# TIL : 250805

# 📌 GitHub Action을 활용한 크론잡 자동화

## 💡 GitHub Actions란?

> GitHub 저장소 내에서 **CI/CD 파이프라인을 구성**하고 자동화할 수 있는 도구.
> 코드를 빌드하고, 테스트하고, 배포하는 과정을 **워크플로우**로 정의 가능.

---

## 🔑 GitHub Actions 핵심 개념

| 구성요소         | 설명                                                    |
| ------------ | ----------------------------------------------------- |
| **Workflow** | 자동화 전체 과정을 담은 `.yml` 파일 (`.github/workflows/` 폴더에 위치) |
| **Event**    | 워크플로우를 실행시키는 조건 (ex. push, PR, schedule 등)            |
| **Job**      | 실행 단위. 여러 Step으로 구성되며 병렬/순차 실행 가능                     |
| **Step**     | 각 Job 안에서 실행되는 명령어 또는 Action                          |
| **Action**   | 재사용 가능한 작업 단위 블록 (테스트, 빌드, 메시지 전송 등)                  |
| **Runner**   | 실제 워크플로우를 실행하는 가상머신 (GitHub-hosted or self-hosted)    |

---

## ⚙️ 프로젝트 구성 요약

### 1. `update_weather.py`

* **역할**: OpenWeather API를 통해 서울 날씨를 조회하고, `README.md`를 업데이트
* 주요 함수:

  * `get_weather()`: 날씨 데이터 요청
  * `update_readme()`: 결과를 `README.md`에 기록

### 2. 워크플로우 파일: `.github/workflows/update_weather.yml`

* **스케줄 실행**: 매일 오전 6시 UTC (= 오후 3시 KST)
* **수동 실행**도 가능 (`workflow_dispatch`)
* 주요 단계:

  1. 리포지토리 체크아웃
  2. Python 환경 설정
  3. `update_weather.py` 실행
  4. 변경사항 커밋 및 푸시

```yaml
on:
  schedule:
    - cron: "0 6 * * *"
  workflow_dispatch:
```

---

## 🔐 Secrets 설정

* `Settings > Secrets and variables > Actions` 경로에서
  `OPENWEATHER_API_KEY` 값을 **Repository Secrets**에 등록해야 함.

---

## 🔁 크론잡 동작 순서

1. 매일 설정된 시간에 OpenWeather API 호출
2. 서울의 날씨 정보를 `README.md`에 반영
3. 변경된 내용을 자동으로 커밋 및 푸시

---

✅ 결과적으로 **매일 최신 날씨 정보가 자동으로 README에 반영**되며,
**GitHub Actions를 활용한 자동화 작업 전체 흐름을 경험**할 수 있음.

